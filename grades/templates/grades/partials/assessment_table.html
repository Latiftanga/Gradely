<div id="assessment-table-container" class="card bg-base-100 shadow">
    <div class="card-body p-0">
        {% if assessments %}
        <div class="overflow-x-auto">
            <table class="table">
                <thead>
                    <tr>
                        <th>Assessment</th>
                        <th>Class/Subject</th>
                        <th>Term</th>
                        <th>Type</th>
                        <th>Grades</th>
                        <th>Average</th>
                        <th>Status</th>
                        <th class="text-right">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for assessment in assessments %}
                    <tr class="hover">
                        <td>
                            <div class="font-medium">{{ assessment.title }}</div>
                            <div class="text-sm text-base-content/60">
                                Max: {{ assessment.max_score }} pts
                            </div>
                        </td>
                        <td>
                            <div class="font-medium">{{ assessment.class_subject.class_instance }}</div>
                            <div class="text-sm text-base-content/60">{{ assessment.class_subject.subject.name }}</div>
                        </td>
                        <td>
                            <span class="badge badge-outline badge-sm">{{ assessment.term }}</span>
                        </td>
                        <td>
                            <span class="badge badge-ghost badge-sm">{{ assessment.assessment_type.name }}</span>
                        </td>
                        <td>
                            <span class="font-medium">{{ assessment.grades_count }}</span>
                        </td>
                        <td>
                            {% if assessment.average %}
                                <span class="font-medium">{{ assessment.average|floatformat:1 }}</span>
                            {% else %}
                                <span class="text-base-content/40">-</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if assessment.is_published %}
                                <span class="badge badge-success badge-sm">Published</span>
                            {% else %}
                                <span class="badge badge-warning badge-sm">Draft</span>
                            {% endif %}
                        </td>
                        <td class="text-right">
                            <div class="dropdown dropdown-end">
                                <label tabindex="0" class="btn btn-ghost btn-sm">
                                    <i class="fas fa-ellipsis-v"></i>
                                </label>
                                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-48">
                                    <li>
                                        <a hx-get="{% url 'grades:assessment_detail' pk=assessment.pk %}"
                                           hx-target="#main-content"
                                           hx-swap="innerHTML"
                                           hx-push-url="{% url 'grades:assessment_detail' pk=assessment.pk %}">
                                            <i class="fas fa-eye"></i> View Details
                                        </a>
                                    </li>
                                    <li>
                                        <a hx-get="{% url 'grades:grade_entry' assessment_pk=assessment.pk %}"
                                           hx-target="#main-content"
                                           hx-swap="innerHTML"
                                           hx-push-url="{% url 'grades:grade_entry' assessment_pk=assessment.pk %}">
                                            <i class="fas fa-edit"></i> Enter Grades
                                        </a>
                                    </li>
                                    <li>
                                        <a hx-get="{% url 'grades:assessment_update' pk=assessment.pk %}"
                                           hx-target="body"
                                           hx-swap="beforeend">
                                            <i class="fas fa-cog"></i> Edit Assessment
                                        </a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a hx-get="{% url 'grades:assessment_delete' pk=assessment.pk %}"
                                           hx-target="body"
                                           hx-swap="beforeend"
                                           class="text-error">
                                            <i class="fas fa-trash"></i> Delete
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="flex flex-col items-center justify-center py-12 text-center">
            <div class="avatar placeholder mb-4">
                <div class="bg-base-200 text-base-content/40 rounded-full w-16 h-16">
                    <i class="fas fa-clipboard-list text-2xl"></i>
                </div>
            </div>
            <h3 class="font-semibold text-lg">No Assessments Found</h3>
            <p class="text-base-content/60 max-w-md mt-1">
                {% if search_query or selected_term or selected_type or selected_class_subject or selected_status %}
                    No assessments match your current filters. Try adjusting your search criteria.
                {% else %}
                    Get started by creating your first assessment.
                {% endif %}
            </p>
            {% if not search_query and not selected_term and not selected_type and not selected_class_subject and not selected_status %}
            <button class="btn btn-primary btn-sm mt-4"
                    hx-get="{% url 'grades:assessment_add' %}"
                    hx-target="body"
                    hx-swap="beforeend">
                <i class="fas fa-plus"></i> Create Assessment
            </button>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
